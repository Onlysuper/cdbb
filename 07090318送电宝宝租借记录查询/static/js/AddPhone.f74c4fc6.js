(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AddPhone"],{"120f":function(t,e,a){"use strict";var s=a("fd4d"),i=a.n(s);i.a},"4c1d":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page addcard-page"},[a("div",{staticClass:"m-form-page"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"m-label"},[t._v("查詢銀行卡號")]),a("div",{staticClass:"item"},[a("div",{staticClass:"input-box no-back"},[t._v("\n                    "+t._s(t.formData.card)+"\n                 ")])])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"label"},[t._v("手機號")]),a("div",{staticClass:"item"},[a("div",{staticClass:"input-box"},[a("van-field",{ref:"phone",attrs:{clearable:"",type:"tel",placeholder:"請輸入手機號"},on:{input:function(e){return t.inputNum(e,"phone")}},model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}})],1)])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"label"},[t._v("驗證碼")]),a("div",{staticClass:"item"},[a("div",{staticClass:"input-box"},[a("van-field",{ref:"tel",attrs:{clearable:"",type:"tel",placeholder:"請輸入驗證碼"},on:{input:function(e){return t.inputNum(e,"code")}},model:{value:t.formData.code,callback:function(e){t.$set(t.formData,"code",e)},expression:"formData.code"}})],1),a("TimerBtn",{ref:"TimerBtn",attrs:{text:"獲取驗證碼",time:60,cb:t.sendCode}})],1)]),a("div",{staticClass:"form-footer"},[a("button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"back-but",on:{click:t.addPhone}},[t._v("添加手機號")])])])])},i=[],n=(a("a481"),a("cebc")),r=a("9feb"),o=a.n(r),c=a("5347"),d=a("4bfc"),l=a("5d06"),f=a("f8c8"),u=a("e69e"),m=a("5118"),h=a("2f62"),p=o.a.getStorage("queryData")?JSON.parse(o.a.getStorage("queryData")):{},v={directives:{waves:d["a"]},name:"addphone",data:function(){return{formData:{card:this.$route.params.card||p.card,phone:"",code:""}}},components:{TimerBtn:u["a"]},methods:Object(n["a"])({},Object(h["b"])(["CHANGE_KEEPALIVES"]),{inputNum:function(t,e){var a=t,s=a.replace(/\s/g,"").replace(/[^\d]/g,"");this.formData[e]=s},sendCode:function(){var t=this;if(!l["a"].phoneNumber.test(this.formData.phone)&&!l["a"].email.test(this.formData.phone)&&!l["a"].mobilePatternHK.test(this.formData.phone)&&!l["a"].mobilePatternTW.test(this.formData.phone))return this.$toast("请输入正确手机号码!"),!1;this.$refs.TimerBtn.timer();var e=c["a"].EncryptObj({phone:this.formData.phone},["phone"]);Object(f["f"])()(Object(n["a"])({},e)).then(function(e){t.$refs.TimerBtn.disabled=!0,t.$refs.TimerBtn.timer(),"0"==e.code?t.$toast("验证码发送成功！"):t.$toast(e.message)})},addPhone:function(){var t=this;if(!this.formData.card)return this.$toast("未获取查询卡号或者手机号!"),!1;if(!this.formData.phone)return this.$toast("请输入正确手机号码或者邮箱号!"),!1;if(!this.formData.code)return this.$toast("验证码不能为空!"),!1;var e=c["a"].EncryptObj({card:this.formData.card,phone:this.formData.phone,code:this.formData.code},["card","phone","code"]);this.$toast.loading({message:"提交中..."}),Object(f["c"])()(Object(n["a"])({},e)).then(function(e){0==e.code&&(t.$toast.success("手机号添加成功！"),t.CHANGE_KEEPALIVES([]),Object(m["setTimeout"])(function(){t.$router.replace({name:"history",params:{card:t.formData.card}})},1500))})}})},b=v,C=(a("120f"),a("2877")),$=Object(C["a"])(b,s,i,!1,null,null,null);e["default"]=$.exports},"5c79":function(t,e,a){},"5d06":function(t,e,a){"use strict";e["a"]={phoneNumber:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,mobilePatternHK:/^(\+852\s)?[5689]{1}\d{7}$/,mobilePatternTW:/^(\+886\s)?[0]{1}[9]{1}\d{8}$/,email:/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/,idCard:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,bankCard:/^\d{5,}$/,verificationCode:{reg:/^\d{6}$/},taxCode:{reg:/^[a-zA-Z0-9]{15,20}$/},name:{reg:/^[\u4E00-\u9FA5A-Za-z]{2,}$/}}},c59f:function(t,e,a){"use strict";var s=a("5c79"),i=a.n(s);i.a},e69e:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"back-but item-s",class:{"timer-btn-active":t.timerBtnActiveClass},attrs:{disabled:t.disabled},on:{click:t.handleClick,touchstart:function(e){t.timerBtnActiveClass=!0},touchend:function(e){t.timerBtnActiveClass=!1}}},[t._v("\n          "+t._s(t.s)+"\n")])},i=[],n=(a("c5f6"),a("4bfc")),r={directives:{waves:n["a"]},data:function(){return{disabled:!1,timerBtnActiveClass:!1,s:this.text}},props:{cb:{type:Function,default:function(){console.info("请传入回调函数")}},time:{type:Number,default:6,required:!0},text:{type:String,default:"发送验证码"},textEnd:{type:String,default:"重新发送"}},methods:{handleClick:function(){this.cb()},timer:function(){var t=this,e=this.time,a=null;this.s=e+"秒",a=setInterval(function(){if(0==e)return t.disabled=!1,t.s=t.textEnd,void clearInterval(a);e--,t.s=e+"秒"},1e3)}}},o=r,c=(a("c59f"),a("2877")),d=Object(c["a"])(o,s,i,!1,null,null,null);e["a"]=d.exports},fd4d:function(t,e,a){}}]);